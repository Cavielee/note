# 什么是负载均衡

客户端发起请求访问服务端时，如果服务端时集群架构，那么此时需要一种规则选择发送给集群中具体那一个节点，这种路由规则就叫做负载均衡。

一般来说，期望的是将客户端的请求均分到集群的各个节点上，从而减少单个节点并发压力，提高处理效率。



# 常见的负载均衡算法

## 轮询法

轮询法 ——Round Robin。将客户端的请求按顺序轮流分配到集群的各个节点上。

缺点：由于集群的节点可能分配硬件资源不一致，因此节点处理能力也不一致。而轮询则不能根据节点处理能力去分配多或者少任务。



## 随机法
通过随机函数，根据后台服务器列表的大小值来随机选取其中一台进行访问。如果随机均衡的话，其效果近似于轮询法。

缺点：

1. 如果随机不均匀，将会导致某一节点压力过大。
2. 和轮询法一样，不能根据节点的处理能力来分配任务数。



## 哈希法

根据客户端的某个特殊值（如 IP 地址），通过哈希函数计算得到一个哈希值，将这个哈希值和
集群节点数量进行取模运算，得到的结果就是要访问的集群节点。

好处：

1. 如果集群节点数不变，意味着同一个客户端的请求都会落到同一个节点上。

缺点：

1. 由于使用 hash 算法，因此请求不能均匀的落在集群的每个节点上。

   

## 加权轮询法

加权轮询法 ——Weight Round Robin。

实际上是轮询法的升级。由于轮询法不能根据节点处理能力而分配任务数。

而加权轮询可以给集群节点分配指定的权重，假如有10个任务，两个节点（权重比分别是3:7），那么意味着3个任务分给权重为3的节点，7个任务分给权重为7的节点。



## 最小连接数法

根据集群节点当前连接数，选择最小连接数的节点。

