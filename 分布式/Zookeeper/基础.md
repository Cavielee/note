Zookeeper 是一个高可靠的分布式协调中间件。





# 数据模型

![Zookeeper节点](C:\Users\63190\Desktop\pics\Zookeeper节点.png)

客户端可以通过 Zookeeper 中间件进行数据存储。

Zookeeper 数据模型实际类似于文件系统的层次化树形结构，即文件夹（节点）里面可以有子文件夹，子文件夹也可以有其子文件夹，以此类推。

ZNode 是 Zookeeper 的最小单元。每一个 ZNode 都可以存储数据和子节点。

通过节点可以存储数据，并且根据节点和子节点的特性可以解决分布式架构中的相关问题。



## 节点特性

### 持久和临时

客户端通过 API 可以请求创建节点。

持久节点：客户端请求创建的节点会被持久化永久保存，直到该节点客户端请求删除。

临时节点：客户端在一次会话连接中创建的节点会在该客户端断开连接时全部被删除。



### 有序节点

客户端请求创建节点（某个节点的子节点）时可以指定节点有序性，此时该节点会自带序号。

如创建3个 `/lock/` 节点的子节点时，此时会创建三个子节点：

1. `/lock/000001`
2. `/lock/000002`
3. `/lock/000003`

这些子节点都会根据

### 临时节点



### 临时有序节点



# 高可用

Leader选举机制



# 数据同步





# Watch机制



# 服务注册中心

在分布式架构中，服务调用需要进行远程网络通信。因此需要知道各个服务集群节点的地址信息（服务不一定会有集群，可能只是单节点）。

各个节点可以将自己的Zookeeper 可以通过作为第三方中间



# 选举

集群中一般需要区分主节点和从节点。因此需要一种选举机制从集群中选取出主节点。

