## Lambda 表达式

### 使用场景

#### 1.接口只有一个方法

实现该接口方法可以通过：

* 定义一个类并实现该接口的方法
* 使用匿名类并在匿名类中实现该方法



有些类并不需要复用，因此可以选择匿名类实现，而lambada是对匿名类这种方式的一种简化。



### 语法

lambda表达式的语法由参数列表、箭头符号`->`和函数体组成。函数体既可以是一个表达式，也可以是一个语句块 

* 表达式：表达式会被执行然后返回执行结果 。
* 语句块：语句块中的语句会被依次执行，就像方法中的语句一样，多条语句用 ; 隔开
  * `return`语句会把控制权交给匿名方法的调用者
  * `break`和`continue`只能在循环中使用
  * 如果函数体有返回值，那么函数体内部的每一条路径都必须返回值

注：表达式函数体消除了`return`关键字，使得语法更加简洁。 

```java
(int x, int y) -> x + y // 传入两个int参数，返回int
() -> 42	// 空参数，返回int
(String s) -> { System.out.println(s); }	// 传入Sting，不返回值
```



### lambda返回类型

返回类型是函数式接口，lambda表达式是该接口的实例。

编译器会对lambda表达式的所期待的类型进行推到，当且仅当符合下面条件时，才会赋给目标类型`T`： 

- `T`是一个函数式接口
- lambda表达式的参数和`T`的方法参数在数量和类型上一一对应
- lambda表达式的返回值和`T`的方法返回值相兼容（Compatible）
- lambda表达式内所抛出的异常和`T`的方法`throws`类型相兼容



#### 简化

* 由于目标类型（函数式接口）已经“知道”lambda表达式的形式参数（Formal parameter）类型，所以我们没有必要把已知类型再重复一遍。也就是说，lambda表达式的参数类型可以从目标类型中得出，因此可以省略lambda表达式的参数类型：

`Comparator<String> c = (s1, s2) -> s1.compareToIgnoreCase(s2); `

* 当lambda的参数只有一个而且它的类型可以被推导得知时，该参数列表外面的括号可以被省略： 

`FileFilter java = f -> f.getName().endsWith(".java"); `

### 目标类型的上下文

即lambda表达式如何推导出目标类型

之前我们提到lambda表达式智能出现在拥有目标类型的上下文中。下面给出了这些带有目标类型的上下文：

- 变量声明
- 赋值
- 返回语句
- 数组初始化器
- 方法和构造方法的参数
- lambda表达式函数体
- 条件表达式（`? :`）
- 转型（Cast）表达式



在前三个上下文（变量声明、赋值和返回语句）里，目标类型即是被赋值或被返回的类型： 



